## Backtracking

- 제약 충족 문제(여러개의 제약 조건을 충족하는 상태를 찾아내는 문제)에서 답을 찾기위한 전략
  - 답을 찾기위해, 후보군의 제약 조건을 점진적으로 체크해나감
  - 체크하고있던 후보군이 제약 조건을 만족할 수 없다고 판단되면 즉시 해당 후보군을 체크하지 않을 것을 표시
  - 그 후 바로 다른 후보군으로 넘어가며 최적의 답을 찾는 방법
- 실제 구현할 때는 모든 후보군을 상태 공간 트리를 통해 표현함
  - 상태 공간 트리 : 문제 해결 과정의 중간 상태를 각 노드로 나타낸 트리
  - 상태 공간 트리를 DFS 방식으로 탐색
  - 탐색하다가, 제약이 맞지 않으면 답의 후보가 될만한 곳으로 바로 넘어가서 검색
    - Promising : 해당 루트가 조건에 맞는지를 검사하는 기법
    - Pruning : 조건에 맞지 않으면 포기하고 다른 루트로 넘어가, 탐색 시간을 절약하는 기법

> 상태 공간 트리를 기반으로 DFS를 통해 탐색하며, 각 루트에 대해 조건에 부합하는지 체크하며 나아가다가, 조건에 맞지 않는 노드는 더이상 DFS로 탐색하지 않고 다른 루트로 넘어감

### 예시

- N Queen 문제
  - N \* N 크기의 체스판에 N개의 퀸을 서로 공격할 수 없도록 배치하는 문제
  - 퀸은 수직, 수평, 대각선으로 공격할 수 있음
  - Pruning 기법으로 풀이
    - 맨 위 행부터 퀸을 배치하고, 다음 행에 해당 퀸이 이동할 수 없는 위치를 찾아 퀸을 배치
      - 퀸은 수평이동이 가능하기 때문에 한 행에는 하나의 퀸 밖에 위치할 수 없기 때문
    - 만약, 앞선 행에 배치한 퀸으로 인해 다음 행에 해당 퀸들이 이동할 수 없는 위치가 없을 경우, 더 이상 퀸을 배치하지 않고 이전 행의 퀸의 배치를 바꿈
  - Promising 기법으로 풀이
    - 현재까지 앞선 행에서 배치한 퀸이 이동할 수 없는 위치를 확인
      - 수평/수직 체크 : 현재 위치 col/row - 퀸 위치 col/row = 0
        - 실 사용시에는 한 행(열)에 하나의 퀸만 배치가 가능하기 때문에, 수직/수평 중 하나만 체크해도 됨
      - 대각선 체크 : 절대값(퀸 위치 row - 현재 위치 row) = 현재 위치 col - 퀸 위치 col
